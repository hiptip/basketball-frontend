{"ast":null,"code":"var _jsxFileName = \"/Users/nickboston/Documents/basketball-frontend/src/components/ConnectHue.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport WaitingScreen from './WaitingScreen';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport BGImage from \"../assets/bg1.svg\";\nimport BBall from \"../assets/splash-basketball.svg\";\nimport Static from \"../assets/splash-lockup.svg\";\nimport BridgeGif from '../assets/philips-loader.gif';\nimport ChooseLights from './ChooseLights';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  \"@keyframes gradient\": {\n    \"0%\": {\n      backgroundPosition: '0% 50%'\n    },\n    \"50%\": {\n      backgroundPosition: '100% 50%'\n    },\n    \"100%\": {\n      backgroundPosition: '0% 50%'\n    }\n  },\n  \"@keyframes lightGlow\": {\n    \"0%\": {\n      boxShadow: '0 0 10px rgba(255,255,255,.2)'\n    },\n    \"50%\": {\n      boxShadow: '0 0 500px rgba(255,255,255,1)'\n    },\n    \"100%\": {\n      boxShadow: '0 0 10px rgba(255,255,255,.2)'\n    }\n  },\n  background: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    overflow: 'auto',\n    backgroundImage: `linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab)`,\n    backgroundPosition: 'center, center',\n    backgroundSize: '400% 400%',\n    backgroundRepeat: 'no-repeat, no-repeat',\n    animation: '$gradient 15s ease infinite',\n    fontFamily: 'Roboto Mono'\n  },\n  lines: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    overflow: 'auto',\n    backgroundImage: `url(${BBall})`,\n    backgroundPosition: 'center',\n    backgroundSize: '250% 250%',\n    backgroundRepeat: 'no-repeat',\n    opacity: 0.05,\n    boxShadow: '0px 0px 20px rgba(255, 255, 255, 0.5)'\n  },\n  center: {\n    position: 'fixed',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    textAlign: 'center'\n  },\n  staticImage: {\n    width: '500px',\n    paddingBottom: 40,\n    '@media (max-width:600px)': {\n      width: '90vw'\n    } // filter: 'dropShadow(50px 5px 5px #222)' get this working\n\n  },\n  buttonStyle: {\n    display: 'flex',\n    alignItems: 'center',\n    cursor: 'pointer',\n    fontSize: '1em',\n    fontFamily: 'Roboto',\n    fontWeight: '500',\n    border: 'none',\n    margin: '0 auto',\n    padding: '20px 30px',\n    textTransform: 'uppercase',\n    borderRadius: '50px'\n  },\n  buttonBlack: {\n    backgroundColor: 'black',\n    color: 'white'\n  },\n  buttonWhite: {\n    backgroundColor: 'whitte',\n    color: 'black'\n  },\n  modalBox: {\n    position: 'fixed',\n    top: '50%',\n    left: '50%',\n    width: '400px',\n    padding: '50px',\n    borderRadius: 20,\n    transform: 'translate(-50%, -50%)',\n    textAlign: 'center',\n    backgroundColor: \"white\",\n    animation: '$lightGlow 20s ease infinite',\n    '@media (max-width:600px)': {\n      width: '100vw',\n      height: '100vh',\n      paddingTop: 200\n    }\n  },\n  loader: {\n    maxWidth: \"150px\"\n  },\n  heading: {\n    fontFamily: 'Roboto',\n    fontWeight: 500,\n    margin: '0 0 30px 0',\n    '@media (max-width:600px)': {\n      fontSize: '1.1em'\n    }\n  },\n  info: {\n    position: \"absolute\",\n    width: \"60%\",\n    margin: 'auto',\n    bottom: \"20%\",\n    right: 0,\n    left: 0,\n    fontSize: '1rem',\n    '@media (min-width:600px)': {\n      fontSize: '1.5rem'\n    }\n  }\n}));\n\nconst ConnectHue = props => {\n  _s();\n\n  const classes = useStyles();\n  const [intervalId, setIntervalId] = useState();\n  const [waiting, setWaiting] = useState(false); // const [bridgeIp, setBridgeIp] = useState()\n\n  const [hueConnected, setHueConnected] = useState(false);\n  const [lights, setLights] = useState({});\n\n  const getBridgeApi = () => {\n    setWaiting(true);\n    fetch(\"https://discovery.meethue.com/\").then(res => res.json()).then(res => linkHue(res));\n  };\n\n  const linkHue = res => {\n    const ip = res[0].internalipaddress;\n    props.setBridgeIp(ip);\n    const intId = setInterval(() => {\n      fetch(`http://${ip}/api`, {\n        method: 'POST',\n        body: JSON.stringify({\n          \"devicetype\": \"hue-nba\"\n        })\n      }).then(res => res.json()).then(res => checkSuccess(res, ip));\n    }, 3000);\n    setIntervalId(intId);\n    setTimeout(() => {\n      clearInterval(intId);\n    }, 30000);\n  };\n\n  const getLights = ip => {\n    fetch(`http://${ip}/api/${props.hueUsername}/lights`).then(res => res.json()).then(res => {\n      setLights(res);\n      props.setLights(res);\n    });\n  };\n\n  const checkSuccess = (res, ip) => {\n    const obj = res[0];\n\n    if ('success' in obj) {\n      clearInterval(intervalId);\n      localStorage.setItem('hueUsername', obj[\"success\"][\"username\"]);\n      props.setHueUsername(obj[\"success\"][\"username\"]);\n      setHueConnected(true);\n      getLights(ip);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.background,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.lines\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }, this), !waiting && !hueConnected && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.mymodal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.center,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: classes.staticImage,\n          src: Static,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${classes.buttonStyle} ${classes.buttonWhite}`,\n          onClick: getBridgeApi,\n          children: \"Start Pairing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }, this), waiting && !hueConnected && /*#__PURE__*/_jsxDEV(\"div\", {\n      class: classes.modalBox,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: classes.heading,\n        children: \"Click the button on your hub to pair\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: classes.loader,\n          src: BridgeGif,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }, this), hueConnected && /*#__PURE__*/_jsxDEV(ChooseLights, {\n      lights: lights,\n      setCheckedLights: props.setCheckedLights,\n      setHueConfigured: props.setHueConfigured,\n      bridgeIp: props.bridgeIp,\n      hueUsername: props.hueUsername\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ConnectHue, \"s/4TUC3T087iUtrIcJmyOLDnlFs=\", false, function () {\n  return [useStyles];\n});\n\n_c = ConnectHue;\nexport default ConnectHue;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConnectHue\");","map":{"version":3,"sources":["/Users/nickboston/Documents/basketball-frontend/src/components/ConnectHue.js"],"names":["React","useState","WaitingScreen","makeStyles","BridgeGif","ChooseLights","useStyles","theme","backgroundPosition","boxShadow","background","position","top","left","bottom","right","overflow","backgroundImage","backgroundSize","backgroundRepeat","animation","fontFamily","lines","BBall","opacity","center","transform","textAlign","staticImage","width","paddingBottom","buttonStyle","display","alignItems","cursor","fontSize","fontWeight","border","margin","padding","textTransform","borderRadius","buttonBlack","backgroundColor","color","buttonWhite","modalBox","height","paddingTop","loader","maxWidth","heading","info","ConnectHue","props","classes","intervalId","setIntervalId","waiting","setWaiting","hueConnected","setHueConnected","lights","setLights","getBridgeApi","fetch","then","res","json","linkHue","ip","internalipaddress","setBridgeIp","intId","setInterval","method","body","JSON","stringify","checkSuccess","setTimeout","clearInterval","getLights","hueUsername","obj","localStorage","setItem","setHueUsername","mymodal","Static","setCheckedLights","setHueConfigured","bridgeIp"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport WaitingScreen from './WaitingScreen'\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport BGImage from '../assets/bg1.svg';\nimport BBall from '../assets/splash-basketball.svg'\nimport Static from '../assets/splash-lockup.svg'\nimport BridgeGif from '../assets/philips-loader.gif'\nimport ChooseLights from './ChooseLights';\n\nconst useStyles = makeStyles((theme) => ({\n    \"@keyframes gradient\": {\n        \"0%\": {\n            backgroundPosition: '0% 50%'\n        },\n        \"50%\": {\n            backgroundPosition: '100% 50%'\n        },\n        \"100%\": {\n            backgroundPosition: '0% 50%'\n        }\n    },\n    \"@keyframes lightGlow\": {\n        \"0%\": {\n            boxShadow:'0 0 10px rgba(255,255,255,.2)',\n        },\n        \"50%\": {\n            boxShadow:'0 0 500px rgba(255,255,255,1)',\n        },\n        \"100%\": {\n            boxShadow:'0 0 10px rgba(255,255,255,.2)',\n        }\n    },\n    background: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0,\n        overflow: 'auto',\n        backgroundImage: `linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab)`,\n        backgroundPosition: 'center, center',\n        backgroundSize: '400% 400%',\n        backgroundRepeat: 'no-repeat, no-repeat',\n        animation: '$gradient 15s ease infinite',\n        fontFamily: 'Roboto Mono'\n\n    },\n    lines: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0,\n        overflow: 'auto',\n        backgroundImage: `url(${BBall})`,\n        backgroundPosition: 'center',\n        backgroundSize: '250% 250%',\n        backgroundRepeat: 'no-repeat',\n        opacity: 0.05,\n        boxShadow: '0px 0px 20px rgba(255, 255, 255, 0.5)'\n\n    },\n    center: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        textAlign: 'center'\n    },\n    staticImage: {\n        width: '500px',\n        paddingBottom: 40,\n        '@media (max-width:600px)': {\n            width: '90vw',\n        },\n\n        // filter: 'dropShadow(50px 5px 5px #222)' get this working\n    },\n    buttonStyle: {\n        display:'flex',\n        alignItems:'center',\n        cursor: 'pointer',\n        fontSize: '1em',\n        fontFamily:'Roboto',\n        fontWeight:'500',\n        border:'none',\n        margin:'0 auto',\n        padding:'20px 30px',\n        textTransform:'uppercase',\n        borderRadius:'50px',\n    },\n    buttonBlack: {\n        backgroundColor:'black',\n        color:'white'\n    },\n    buttonWhite: {\n        backgroundColor:'whitte',\n        color:'black'\n    },\n    modalBox: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        width:'400px',\n        padding:'50px',\n        borderRadius: 20,\n        transform: 'translate(-50%, -50%)',\n        textAlign: 'center',\n        backgroundColor: \"white\",\n        animation: '$lightGlow 20s ease infinite',\n        '@media (max-width:600px)': {\n            width: '100vw',\n            height:'100vh',\n            paddingTop:200\n        },\n    },\n    loader: {\n        maxWidth: \"150px\",\n    },\n    heading: {\n        fontFamily:'Roboto',\n        fontWeight:500,\n        margin:'0 0 30px 0',\n        '@media (max-width:600px)': {\n            fontSize:'1.1em'\n        },\n    },\n    info: {\n        position: \"absolute\",\n        width: \"60%\",\n        margin: 'auto',\n        bottom: \"20%\",\n        right: 0,\n        left: 0,\n        fontSize: '1rem',\n        '@media (min-width:600px)': {\n            fontSize: '1.5rem',\n        },\n    }\n}));\n\nconst ConnectHue = (props) => {\n    const classes = useStyles();\n    const [intervalId, setIntervalId] = useState()\n    const [waiting, setWaiting] = useState(false)\n    // const [bridgeIp, setBridgeIp] = useState()\n    const [hueConnected, setHueConnected] = useState(false)\n    const [lights, setLights] = useState({})\n\n    const getBridgeApi = () => {\n        setWaiting(true)\n        fetch(\"https://discovery.meethue.com/\")\n            .then(res => res.json())\n            .then(res => linkHue(res))\n    }\n\n    const linkHue = (res) => {\n        const ip = res[0].internalipaddress\n        props.setBridgeIp(ip)\n        const intId = setInterval(() => {\n            fetch(`http://${ip}/api`, {\n                method: 'POST',\n                body: JSON.stringify({ \"devicetype\": \"hue-nba\" })\n            })\n                .then(res => res.json())\n                .then(res => checkSuccess(res, ip))\n        }, 3000)\n        setIntervalId(intId)\n        setTimeout(() => {\n            clearInterval(intId)\n        }, 30000)\n    }\n\n    const getLights = (ip) => {\n        fetch(`http://${ip}/api/${props.hueUsername}/lights`)\n            .then(res => res.json())\n            .then(res => {\n                setLights(res)\n                props.setLights(res)\n            })\n\n    }\n\n    const checkSuccess = (res, ip) => {\n        const obj = res[0]\n        if ('success' in obj) {\n            clearInterval(intervalId)\n            localStorage.setItem('hueUsername', obj[\"success\"][\"username\"])\n            props.setHueUsername(obj[\"success\"][\"username\"])\n            setHueConnected(true)\n            getLights(ip)\n        }\n    }\n\n    return (\n        <div className={classes.background}>\n            <div className={classes.lines}></div>\n            {}\n            {(!waiting && !hueConnected) &&\n                <div className={classes.mymodal}>\n                    <div className={classes.center}>\n                        <img className={classes.staticImage} src={Static} alt=\"\" />\n                        <button className={`${classes.buttonStyle} ${classes.buttonWhite}`}  onClick={getBridgeApi}>Start Pairing</button>\n                    </div>\n\n                </div>\n            }\n            {(waiting && !hueConnected) &&\n                <div class={classes.modalBox}>\n                    <h1 className={classes.heading}>Click the button on your hub to pair</h1>\n                    <div>\n                    <img className={classes.loader} src={BridgeGif} alt=\"\" />\n                    </div>\n                </div>\n            }\n            {hueConnected &&\n                <ChooseLights lights={lights} setCheckedLights={props.setCheckedLights} setHueConfigured={props.setHueConfigured} bridgeIp={props.bridgeIp} hueUsername={props.hueUsername} />\n            }\n        </div>\n    )\n}\n\nexport default ConnectHue\n"]},"metadata":{},"sourceType":"module"}